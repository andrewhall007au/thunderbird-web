'use client';

import React from 'react';

export default function FlowDiagramPage() {
  return (
    <div className="min-h-screen bg-slate-950 text-gray-100 p-8">
      <div className="max-w-7xl mx-auto">
        <h1 className="text-4xl font-bold mb-2 text-cyan-400">
          Thunderbird System Flow
        </h1>
        <p className="text-gray-400 mb-8">
          Complete data flow from GPX upload to SMS delivery with elevation correction
        </p>

        {/* Main Flow Diagram */}
        <section className="mb-16">
          <div className="bg-slate-900 rounded-xl p-8 border border-slate-800">
            <div className="font-mono text-sm leading-relaxed">
              <pre className="text-cyan-300 overflow-x-auto">{`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                    THUNDERBIRD SYSTEM FLOW                                                â•‘
â•‘                              From GPX Upload to SMS Delivery                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


PHASE 1: ROUTE CREATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   User Action   â”‚
    â”‚   /create page  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                              GPX FILE UPLOAD                                     â”‚
    â”‚                                                                                  â”‚
    â”‚   User uploads GPX file OR selects pre-configured trail                         â”‚
    â”‚                                                                                  â”‚
    â”‚   GPX contains:                                                                  â”‚
    â”‚   â”œâ”€â”€ <trkpt lat="39.1178" lon="-106.4453">                                     â”‚
    â”‚   â”‚       <ele>3048</ele>  â—„â”€â”€ Elevation in meters (GPS-derived, ACCURATE)      â”‚
    â”‚   â”‚       <name>Mt Elbert Trailhead</name>                                      â”‚
    â”‚   â”‚   </trkpt>                                                                  â”‚
    â”‚   â””â”€â”€ ... more waypoints                                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                              GPX PARSER                                          â”‚
    â”‚                              (Frontend)                                          â”‚
    â”‚                                                                                  â”‚
    â”‚   Library: @we-gold/gpxjs                                                       â”‚
    â”‚                                                                                  â”‚
    â”‚   Extracts:                                                                      â”‚
    â”‚   â”œâ”€â”€ Waypoints: { lat, lon, elevation, name, type }                            â”‚
    â”‚   â”œâ”€â”€ Track geometry: GeoJSON LineString for map display                        â”‚
    â”‚   â””â”€â”€ Metadata: route name, total distance, elevation gain                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         WAYPOINT CLASSIFICATION                                  â”‚
    â”‚                                                                                  â”‚
    â”‚   User marks each waypoint as:                                                   â”‚
    â”‚   â”œâ”€â”€ ğŸ•ï¸  CAMP    - overnight locations (weather priority)                       â”‚
    â”‚   â”œâ”€â”€ â›°ï¸  PEAK    - summit points (wind/exposure critical)                       â”‚
    â”‚   â”œâ”€â”€ ğŸš¶ TRAILHEAD - start/end points                                            â”‚
    â”‚   â””â”€â”€ ğŸ“ WAYPOINT  - intermediate points                                         â”‚
    â”‚                                                                                  â”‚
    â”‚   Each gets unique SMS code: ELBER, TWIN1, INDEP, etc.                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         SAVE TO BACKEND                                          â”‚
    â”‚                                                                                  â”‚
    â”‚   POST /api/routes                                                               â”‚
    â”‚   â”œâ”€â”€ Route metadata (name, status)                                              â”‚
    â”‚   â””â”€â”€ All waypoints with elevations                                              â”‚
    â”‚                                                                                  â”‚
    â”‚   Backend: FastAPI + SQLite                                                      â”‚
    â”‚   Stores: routes, waypoints, user subscriptions                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



PHASE 2: FORECAST REQUEST (User-initiated PULL system)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         USER SENDS SMS COMMAND                                   â”‚
    â”‚                                                                                  â”‚
    â”‚   Commands:                                                                      â”‚
    â”‚   â”œâ”€â”€ CAST {code}    â†’ 12hr hourly forecast for waypoint                        â”‚
    â”‚   â”œâ”€â”€ CAST24 {code}  â†’ 24hr hourly forecast                                     â”‚
    â”‚   â”œâ”€â”€ CAST7 {code}   â†’ 7-day forecast                                           â”‚
    â”‚   â”œâ”€â”€ CAST7 CAMPS    â†’ 7-day for all camps on route                             â”‚
    â”‚   â”œâ”€â”€ CAST7 PEAKS    â†’ 7-day for all peaks on route                             â”‚
    â”‚   â””â”€â”€ CAST -41.89,146.08 â†’ Forecast for any GPS coordinates                     â”‚
    â”‚                                                                                  â”‚
    â”‚   Example: User texts "CAST ELBER" to Thunderbird number                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         TWILIO WEBHOOK (Inbound SMS)                             â”‚
    â”‚                         POST /webhook/sms/inbound                                â”‚
    â”‚                                                                                  â”‚
    â”‚   User texts: "CAST ELBER" â†’ Twilio receives â†’ Webhook triggered                â”‚
    â”‚                                                                                  â”‚
    â”‚   Receives: From phone, Message body ("CAST ELBER")                             â”‚
    â”‚   Parses: Command (CAST) + Location code (ELBER)                                â”‚
    â”‚   Validates: User subscription, Route access                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         WAYPOINT LOOKUP                                          â”‚
    â”‚                                                                                  â”‚
    â”‚   Input: SMS code "ELBER"                                                        â”‚
    â”‚   Output: Waypoint {                                                             â”‚
    â”‚       lat: 39.1178,                                                              â”‚
    â”‚       lon: -106.4453,                                                            â”‚
    â”‚       elevation: 3048,  â—„â”€â”€ FROM GPX (accurate)                                  â”‚
    â”‚       name: "Mt Elbert Trailhead",                                               â”‚
    â”‚       type: "trailhead"                                                          â”‚
    â”‚   }                                                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼


PHASE 3: COUNTRY DETECTION & PROVIDER ROUTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         COUNTRY DETECTION                                        â”‚
    â”‚                                                                                  â”‚
    â”‚   Input: lat=39.1178, lon=-106.4453                                              â”‚
    â”‚   Method: Reverse geocoding or coordinate bounds check                           â”‚
    â”‚   Output: country_code = "US"                                                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         WEATHER ROUTER                                           â”‚
    â”‚                         app/services/weather/router.py                           â”‚
    â”‚                                                                                  â”‚
    â”‚   Country â†’ Provider Mapping:                                                    â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚   â”‚ Country    â”‚ Primary Provider              â”‚ Resolution â”‚ Fallback     â”‚     â”‚
    â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
    â”‚   â”‚ US         â”‚ NWS (api.weather.gov)        â”‚ 2.5 km     â”‚ Open-Meteo   â”‚     â”‚
    â”‚   â”‚ AU         â”‚ BOM (api.weather.bom.gov.au) â”‚ 2.2 km     â”‚ Open-Meteo   â”‚     â”‚
    â”‚   â”‚ CA         â”‚ Environment Canada (HRDPS)   â”‚ 2.5 km     â”‚ Open-Meteo   â”‚     â”‚
    â”‚   â”‚ GB         â”‚ Met Office (IMPROVER)        â”‚ 1.5 km     â”‚ Open-Meteo   â”‚     â”‚
    â”‚   â”‚ FR         â”‚ Open-Meteo (Meteo-France)    â”‚ 1.5 km     â”‚ -            â”‚     â”‚
    â”‚   â”‚ CH         â”‚ Open-Meteo (MeteoSwiss)      â”‚ 2.0 km     â”‚ -            â”‚     â”‚
    â”‚   â”‚ NZ, ZA     â”‚ Open-Meteo (ECMWF)           â”‚ 9.0 km     â”‚ -            â”‚     â”‚
    â”‚   â”‚ Other      â”‚ Open-Meteo (best_match)      â”‚ ~25 km     â”‚ -            â”‚     â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚                                                                                  â”‚
    â”‚   For US â†’ Selected: NWS (National Weather Service)                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼


PHASE 4: WEATHER API CALL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         NWS API CALLS                                            â”‚
    â”‚                         (For US locations)                                       â”‚
    â”‚                                                                                  â”‚
    â”‚   STEP 1: Get Grid Info                                                          â”‚
    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
    â”‚   GET https://api.weather.gov/points/39.1178,-106.4453                          â”‚
    â”‚                                                                                  â”‚
    â”‚   Response:                                                                      â”‚
    â”‚   {                                                                              â”‚
    â”‚     "properties": {                                                              â”‚
    â”‚       "gridId": "PUB",           // Pueblo forecast office                       â”‚
    â”‚       "gridX": 45,                                                               â”‚
    â”‚       "gridY": 123,                                                              â”‚
    â”‚       "forecast": "https://api.weather.gov/gridpoints/PUB/45,123/forecast"      â”‚
    â”‚     }                                                                            â”‚
    â”‚   }                                                                              â”‚
    â”‚                                                                                  â”‚
    â”‚   STEP 2: Get Grid Elevation                                                     â”‚
    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
    â”‚   GET https://api.weather.gov/gridpoints/PUB/45,123                             â”‚
    â”‚                                                                                  â”‚
    â”‚   Response:                                                                      â”‚
    â”‚   {                                                                              â”‚
    â”‚     "properties": {                                                              â”‚
    â”‚       "elevation": {                                                             â”‚
    â”‚         "value": 4043,  â—„â”€â”€ GRID CELL MIDPOINT ELEVATION                         â”‚
    â”‚         "unitCode": "wmoUnit:m"                                                  â”‚
    â”‚       }                                                                          â”‚
    â”‚     }                                                                            â”‚
    â”‚   }                                                                              â”‚
    â”‚                                                                                  â”‚
    â”‚   STEP 3: Get Forecast                                                           â”‚
    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
    â”‚   GET https://api.weather.gov/gridpoints/PUB/45,123/forecast                    â”‚
    â”‚                                                                                  â”‚
    â”‚   Response:                                                                      â”‚
    â”‚   {                                                                              â”‚
    â”‚     "properties": {                                                              â”‚
    â”‚       "periods": [                                                               â”‚
    â”‚         {                                                                        â”‚
    â”‚           "name": "Today",                                                       â”‚
    â”‚           "temperature": 14,  â—„â”€â”€ Fahrenheit, valid at GRID elevation (4043m)   â”‚
    â”‚           "temperatureUnit": "F",                                                â”‚
    â”‚           "windSpeed": "10 to 15 mph",                                           â”‚
    â”‚           "shortForecast": "Partly Sunny"                                        â”‚
    â”‚         }                                                                        â”‚
    â”‚       ]                                                                          â”‚
    â”‚     }                                                                            â”‚
    â”‚   }                                                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼


PHASE 5: ELEVATION CORRECTION (CRITICAL!)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         THE PROBLEM                                              â”‚
    â”‚                                                                                  â”‚
    â”‚   NWS returns temperature valid for GRID CELL elevation, not user's point!      â”‚
    â”‚                                                                                  â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚                                                                          â”‚   â”‚
    â”‚   â”‚     Mt. Elbert Peak (4401m)                                              â”‚   â”‚
    â”‚   â”‚            â–²                           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—     â”‚   â”‚
    â”‚   â”‚           /â”‚\\                          â•‘ NWS 2.5km Grid Cell       â•‘     â”‚   â”‚
    â”‚   â”‚          / â”‚ \\     Grid includes      â•‘                           â•‘     â”‚   â”‚
    â”‚   â”‚         /  â”‚  \\    the mountain! â”€â”€â–¶  â•‘ Midpoint elev: 4,043m     â•‘     â”‚   â”‚
    â”‚   â”‚        /   â”‚   \\                      â•‘ Temp valid here: -13Â°C    â•‘     â”‚   â”‚
    â”‚   â”‚       /    â”‚    \\                     â•‘                           â•‘     â”‚   â”‚
    â”‚   â”‚   â”€â”€â”€/â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€\\â”€â”€â”€                 â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚   â”‚
    â”‚   â”‚            â”‚                                                             â”‚   â”‚
    â”‚   â”‚   Trailhead (3048m) â—„â”€â”€ User is HERE, ~1000m LOWER than grid average!   â”‚   â”‚
    â”‚   â”‚                                                                          â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                                                  â”‚
    â”‚   If we show -13Â°C, user expects freezing temps when it's actually mild!        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         THE SOLUTION: LAPSE RATE CORRECTION                      â”‚
    â”‚                                                                                  â”‚
    â”‚   Standard atmospheric lapse rate: 6.5Â°C per 1000m (or 0.0065Â°C per meter)      â”‚
    â”‚                                                                                  â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚                                                                          â”‚   â”‚
    â”‚   â”‚   INPUTS:                                                                â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ grid_elevation = 4,043m  (from NWS /gridpoints API)               â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ gpx_elevation  = 3,048m  (from user's GPX file - ACCURATE)        â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ raw_temp       = -13Â°C   (from NWS forecast)                       â”‚   â”‚
    â”‚   â”‚                                                                          â”‚   â”‚
    â”‚   â”‚   CALCULATION:                                                           â”‚   â”‚
    â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
    â”‚   â”‚   â”‚                                                                 â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚   elevation_diff = grid_elevation - gpx_elevation               â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                  = 4,043 - 3,048                                â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                  = 995m                                         â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                                                                 â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚   adjustment = elevation_diff Ã— 0.0065                          â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚              = 995 Ã— 0.0065                                     â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚              = +6.47Â°C                                          â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                                                                 â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚   adjusted_temp = raw_temp + adjustment                         â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                 = -13 + 6.47                                    â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                 = -6.5Â°C  â—„â”€â”€ ACCURATE for user's location!     â”‚    â”‚   â”‚
    â”‚   â”‚   â”‚                                                                 â”‚    â”‚   â”‚
    â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
    â”‚   â”‚                                                                          â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                                                  â”‚
    â”‚   User at 3,048m will experience -6.5Â°C, NOT the -13Â°C at grid elevation!       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼


PHASE 6: DANGER RATING CALCULATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         DANGER ASSESSMENT                                        â”‚
    â”‚                                                                                  â”‚
    â”‚   For each waypoint, analyze:                                                    â”‚
    â”‚                                                                                  â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚   â”‚ Condition        â”‚ Danger Trigger                                       â”‚    â”‚
    â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
    â”‚   â”‚ Wind             â”‚ Gusts > 50 km/h = âš ï¸  |  > 70 km/h = âš ï¸âš ï¸              â”‚    â”‚
    â”‚   â”‚ Freezing Level   â”‚ Below waypoint elevation = âš ï¸ Ice risk               â”‚    â”‚
    â”‚   â”‚ Cloud Base       â”‚ Below waypoint + high cloud = âš ï¸ Whiteout risk       â”‚    â”‚
    â”‚   â”‚ Precipitation    â”‚ > 10mm rain or > 5cm snow = âš ï¸ Exposure risk         â”‚    â”‚
    â”‚   â”‚ CAPE             â”‚ > 400 J/kg = âš¡ Thunderstorm risk                     â”‚    â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                                                                  â”‚
    â”‚   Output: Danger rating (!, !!, !!!) per forecast period                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼


PHASE 7: SMS FORMATTING & DELIVERY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         SMS FORMATTER                                            â”‚
    â”‚                                                                                  â”‚
    â”‚   Compress forecast into SMS-compatible format (160 char limit per segment)     â”‚
    â”‚                                                                                  â”‚
    â”‚   Column Key:                                                                    â”‚
    â”‚   â”œâ”€â”€ Day = Date/period (7a=7th morning, p=afternoon, n=night)                  â”‚
    â”‚   â”œâ”€â”€ Tmp = Temperature Â°C (elevation-adjusted!)                                â”‚
    â”‚   â”œâ”€â”€ %Rn = Precipitation probability %                                          â”‚
    â”‚   â”œâ”€â”€ Rn = Rain amount mm                                                        â”‚
    â”‚   â”œâ”€â”€ Sn = Snow amount cm                                                        â”‚
    â”‚   â”œâ”€â”€ Wa = Wind average km/h                                                     â”‚
    â”‚   â”œâ”€â”€ Wm = Wind max (gusts) km/h                                                 â”‚
    â”‚   â”œâ”€â”€ %Cd = Cloud cover %                                                        â”‚
    â”‚   â”œâ”€â”€ CB = Cloud base (Ã—100m)                                                    â”‚
    â”‚   â”œâ”€â”€ FL = Freezing level (Ã—100m)                                                â”‚
    â”‚   â””â”€â”€ D = Danger rating (!,!!,!!!)                                               â”‚
    â”‚                                                                                  â”‚
    â”‚   Example SMS:                                                                   â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚ Mt Elbert TH 3048m                                                       â”‚   â”‚
    â”‚   â”‚ Day|Tmp|%Rn|Rn|Sn|Wa|Wm|%Cd|CB|FL|D                                     â”‚   â”‚
    â”‚   â”‚ 28a|-7 |10 |0 |0 |15|25|40 |35|32|                                       â”‚   â”‚
    â”‚   â”‚   p|-5 |20 |0-1|0|20|35|60 |30|30|!                                      â”‚   â”‚
    â”‚   â”‚ 29a|-8 |40 |1-3|0|25|45|80 |25|28|!!                                     â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         TWILIO SMS DELIVERY                                      â”‚
    â”‚                                                                                  â”‚
    â”‚   API: api.twilio.com                                                            â”‚
    â”‚                                                                                  â”‚
    â”‚   POST /2010-04-01/Accounts/{SID}/Messages.json                                 â”‚
    â”‚   {                                                                              â”‚
    â”‚     "To": "+1234567890",                                                         â”‚
    â”‚     "From": "+0987654321",  // Twilio number                                     â”‚
    â”‚     "Body": "Mt Elbert TH 3048m\\nDay|Tmp|%Rn|..."                               â”‚
    â”‚   }                                                                              â”‚
    â”‚                                                                                  â”‚
    â”‚   Works with: Regular phones, Garmin inReach, Zoleo, Spot X                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              END-TO-END SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    SETUP:    User uploads GPX â†’ Waypoints saved with elevations â†’ Route ready

    ON-DEMAND (PULL):
    User texts "CAST ELBER" â†’ Twilio webhook â†’ Lookup waypoint â†’
    Country detection â†’ Provider selection (NWS for US) â†’
    Weather API call â†’ Get grid elevation â†’ Lapse rate correction â†’
    Danger calculation â†’ SMS formatting â†’ Reply sent to user

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CRITICAL: GPX elevation is ACCURATE (GPS-derived)                          â”‚
    â”‚            Grid elevation is APPROXIMATE (2.5km cell average)               â”‚
    â”‚            We correct from grid â†’ GPX using 6.5Â°C/1000m lapse rate          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`}</pre>
            </div>
          </div>
        </section>

        {/* API Reference */}
        <section className="mb-12">
          <h2 className="text-2xl font-semibold mb-4 text-cyan-300">External APIs Used</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div className="bg-slate-900 rounded-lg p-6 border border-slate-800">
              <h3 className="text-lg font-semibold text-yellow-400 mb-3">Weather APIs</h3>
              <ul className="space-y-2 text-sm">
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">api.weather.gov</span>
                  <span className="text-gray-400">- NWS (US) 2.5km</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">api.weather.bom.gov.au</span>
                  <span className="text-gray-400">- BOM (AU) 2.2km</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">api.open-meteo.com</span>
                  <span className="text-gray-400">- Global fallback</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">data.hub.api.metoffice.gov.uk</span>
                  <span className="text-gray-400">- Met Office (UK) 1.5km</span>
                </li>
              </ul>
            </div>
            <div className="bg-slate-900 rounded-lg p-6 border border-slate-800">
              <h3 className="text-lg font-semibold text-yellow-400 mb-3">Supporting APIs</h3>
              <ul className="space-y-2 text-sm">
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">api.opentopodata.org</span>
                  <span className="text-gray-400">- Elevation lookup (90m DEM)</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">api.twilio.com</span>
                  <span className="text-gray-400">- SMS delivery</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-cyan-400 font-mono">api.mapbox.com</span>
                  <span className="text-gray-400">- Map tiles (frontend)</span>
                </li>
              </ul>
            </div>
          </div>
        </section>

        {/* Quick Links */}
        <section className="mb-12">
          <h2 className="text-2xl font-semibold mb-4 text-cyan-300">Demo Pages</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <a href="/create" className="bg-slate-900 rounded-lg p-6 border border-slate-800 hover:border-cyan-500 transition-colors">
              <h3 className="text-lg font-semibold text-cyan-400 mb-2">Route Creator</h3>
              <p className="text-gray-400 text-sm">Upload GPX, add waypoints, save route</p>
              <p className="text-cyan-500 text-sm mt-2">/create â†’</p>
            </a>
            <a href="/architecture" className="bg-slate-900 rounded-lg p-6 border border-slate-800 hover:border-cyan-500 transition-colors">
              <h3 className="text-lg font-semibold text-cyan-400 mb-2">Architecture</h3>
              <p className="text-gray-400 text-sm">Technical overview, provider table</p>
              <p className="text-cyan-500 text-sm mt-2">/architecture â†’</p>
            </a>
            <a href="http://localhost:8001/admin" target="_blank" className="bg-slate-900 rounded-lg p-6 border border-slate-800 hover:border-cyan-500 transition-colors">
              <h3 className="text-lg font-semibold text-cyan-400 mb-2">Admin Dashboard</h3>
              <p className="text-gray-400 text-sm">Backend admin, user management</p>
              <p className="text-cyan-500 text-sm mt-2">:8001/admin â†’</p>
            </a>
          </div>
        </section>

        {/* Footer */}
        <footer className="text-center text-gray-500 text-sm pt-8 border-t border-slate-800">
          <p>Thunderbird Global - Precision Weather for Hikers</p>
          <p className="mt-2">
            Frontend: <code className="text-cyan-400">localhost:3000</code> |
            Backend: <code className="text-cyan-400">localhost:8001</code>
          </p>
        </footer>
      </div>
    </div>
  );
}
